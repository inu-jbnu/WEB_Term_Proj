âœ… README.md (ìµœì¢…ë³¸)
# Web Term Project â€“ FastAPI Backend

FastAPI + MySQL + JWT ê¸°ë°˜ ì›¹ ì„œë¹„ìŠ¤ ë°±ì—”ë“œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.  
Docker Compose í™˜ê²½ì—ì„œ ì‹¤í–‰ë˜ë©°, ì¸ì¦(Auth)ë¶€í„° í…ŒìŠ¤íŠ¸/ì§ˆë¬¸/ì„ íƒì§€/ê²°ê³¼ ê´€ë¦¬ê¹Œì§€ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ“Œ ê¸°ìˆ  ìŠ¤íƒ

- **Backend**: FastAPI
- **ORM**: SQLAlchemy
- **Database**: MySQL 8.0
- **Authentication**: JWT (python-jose)
- **Password Hash**: passlib + bcrypt
- **Infra**: Docker, Docker Compose
- **API Test**: Postman
- **Docs**: Swagger UI

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°



app/
â”œâ”€ core/
â”‚ â”œâ”€ config.py # í™˜ê²½ ì„¤ì •
â”‚ â”œâ”€ security.py # JWT / ë¹„ë°€ë²ˆí˜¸ ì²˜ë¦¬
â”‚
â”œâ”€ db/
â”‚ â”œâ”€ models/ # SQLAlchemy ëª¨ë¸
â”‚ â”œâ”€ session.py # DB ì„¸ì…˜ ê´€ë¦¬
â”‚
â”œâ”€ routers/
â”‚ â”œâ”€ auth.py # ë¡œê·¸ì¸
â”‚ â”œâ”€ users.py # ì‚¬ìš©ì API
â”‚ â”œâ”€ tests.py # í…ŒìŠ¤íŠ¸ API
â”‚ â”œâ”€ questions.py # ì§ˆë¬¸ API
â”‚ â”œâ”€ question_choices.py
â”‚ â”œâ”€ answers.py
â”‚ â”œâ”€ results.py
â”‚
â”œâ”€ main.py # FastAPI ì—”íŠ¸ë¦¬í¬ì¸íŠ¸


---

## âš™ï¸ ì‹¤í–‰ ë°©ë²•

### 1ï¸âƒ£ í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (.env)

```env
DB_HOST=db
DB_PORT=3306
DB_NAME=webdb
DB_USER=root
DB_PASSWORD=rootpw

SECRET_KEY=change-me
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

2ï¸âƒ£ Docker ì‹¤í–‰
docker compose up -d --build


ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸:

docker compose ps

3ï¸âƒ£ API ë¬¸ì„œ í™•ì¸

Swagger UI

http://localhost:8080/docs


ë˜ëŠ”

http://<SERVER_IP>:10224/docs


Health Check

GET /health

ğŸ” ì¸ì¦ (Auth)
ë¡œê·¸ì¸
POST /auth/login


Request

{
  "email": "admin@example.com",
  "password": "abcd1234"
}


Response

{
  "access_token": "JWT_TOKEN",
  "token_type": "bearer"
}


Postmanì—ì„œ ë°›ì€ í† í°ì„
Authorization: Bearer <TOKEN> í˜•íƒœë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.

ğŸ‘¤ User API

POST /user/ : ì‚¬ìš©ì ìƒì„±

GET /user/ : ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ

GET /user/{user_id} : ì‚¬ìš©ì ë‹¨ê±´ ì¡°íšŒ

ğŸ§ª Test API

POST /tests/ : í…ŒìŠ¤íŠ¸ ìƒì„±

GET /tests/ : í…ŒìŠ¤íŠ¸ ëª©ë¡ ì¡°íšŒ

GET /tests/{test_id} : í…ŒìŠ¤íŠ¸ ì¡°íšŒ

PUT /tests/{test_id} : í…ŒìŠ¤íŠ¸ ìˆ˜ì •

DELETE /tests/{test_id} : í…ŒìŠ¤íŠ¸ ì‚­ì œ

â“ Question API

POST /questions/tests/{test_id}/questions

GET /questions/tests/{test_id}/questions

âš ï¸ test_idëŠ” ë°˜ë“œì‹œ ì¡´ì¬í•˜ëŠ” í…ŒìŠ¤íŠ¸ IDì—¬ì•¼ í•©ë‹ˆë‹¤.

ğŸ§ª Postman ì‚¬ìš© íë¦„

POST /auth/login â†’ access_token íšë“

Postman Collection Auth ì„¤ì •

Type: Bearer Token

Token: {{ACCESS_TOKEN}}

í…ŒìŠ¤íŠ¸ ìƒì„±

ì§ˆë¬¸ ìƒì„±

ì„ íƒì§€ ìƒì„±

ê²°ê³¼ ì¡°íšŒ

ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
500 Internal Server Error ë°œìƒ ì‹œ
docker compose logs --tail=200 app


ìì£¼ ë°œìƒí•˜ëŠ” ì›ì¸:

ì¡´ì¬í•˜ì§€ ì•ŠëŠ” test_idë¡œ ì§ˆë¬¸ ìƒì„±

NOT NULL ì»¬ëŸ¼ ëˆ„ë½

FK ê´€ê³„ ì˜¤ë¥˜

ì¤‘ë³µ ë°ì´í„° (UNIQUE)

âœ¨ í–¥í›„ ê°œì„  ì‚¬í•­

Swagger Authorize ë²„íŠ¼ ì¶”ê°€

Role ê¸°ë°˜ ê¶Œí•œ ë¶„ë¦¬ (ADMIN / USER)

Alembic ë§ˆì´ê·¸ë ˆì´ì…˜ ì •ë¦¬

í…ŒìŠ¤íŠ¸ ê²°ê³¼ í†µê³„ API